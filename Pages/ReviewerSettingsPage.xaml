<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="mindvault.Pages.ReviewerSettingsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:mindvault.Controls"
    Shell.NavBarIsVisible="False">

  <!-- THEME -->
  <ContentPage.Resources>
    <Color x:Key="Primary">#31B6D8</Color>
    <Color x:Key="PrimaryDark">#0B57C1</Color>
    <Color x:Key="Ink">#0D3848</Color>
    <Color x:Key="Surface">#FFFFFF</Color>
    <Color x:Key="TextPrimary">#111318</Color>
    <Color x:Key="TextSecondary">#5A6573</Color>
    <Color x:Key="Divider">#E8EDF2</Color>
    <Color x:Key="GreyBar">#D8D8D8</Color>

    <Style x:Key="Card" TargetType="Border">
      <Setter Property="BackgroundColor" Value="{StaticResource Surface}" />
      <Setter Property="StrokeThickness" Value="0" />
      <Setter Property="StrokeShape" Value="RoundRectangle 18" />
      <Setter Property="Padding" Value="14" />
      <Setter Property="Shadow">
        <Setter.Value>
          <Shadow Opacity="0.18" Radius="16">
            <Shadow.Offset><Point X="0" Y="8"/></Shadow.Offset>
          </Shadow>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="ModeTile" TargetType="Border">
      <Setter Property="StrokeShape" Value="RoundRectangle 14" />
      <Setter Property="HeightRequest" Value="86" />
      <Setter Property="Padding" Value="16" />
    </Style>

    <Style x:Key="Chip" TargetType="Border">
      <Setter Property="StrokeShape" Value="Ellipse" />
      <Setter Property="Padding" Value="14,8" />
      <Setter Property="BackgroundColor" Value="White" />
      <Setter Property="Stroke" Value="{StaticResource Divider}" />
      <Setter Property="StrokeThickness" Value="1" />
    </Style>

    <Style x:Key="ChipSelected" TargetType="Border" BasedOn="{StaticResource Chip}">
      <Setter Property="BackgroundColor" Value="{StaticResource Primary}" />
      <Setter Property="StrokeThickness" Value="0" />
    </Style>
  </ContentPage.Resources>

  <!-- BACKGROUND -->
  <ContentPage.Background>
    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
      <GradientStop Color="#3CC5F0" Offset="0" />
      <GradientStop Color="#0B57C1" Offset="1" />
    </LinearGradientBrush>
  </ContentPage.Background>

  <Grid RowDefinitions="Auto,*">

    <!-- HEADER -->
    <Border Grid.Row="0" BackgroundColor="White" StrokeThickness="0"
            StrokeShape="RoundRectangle 0,0,18,18"
            Padding="12,10" Margin="0,0,0,8">
      <Grid ColumnDefinitions="Auto,*,Auto" VerticalOptions="Center">
        <controls:HamburgerButton x:Name="HamburgerButton" />
        <HorizontalStackLayout Grid.Column="1" Spacing="6" VerticalOptions="Center">
          <Label Text="{Binding ReviewerTitle}" FontAttributes="Bold" FontSize="18"
                 TextColor="{StaticResource TextPrimary}" />
          <Label Text="&#xF013;" FontFamily="FAS" FontSize="14" TextColor="{StaticResource Primary}" />
        </HorizontalStackLayout>
        <!-- X Close -->
        <Border Grid.Column="2" WidthRequest="34" HeightRequest="34"
                Stroke="#E8EDF2" StrokeThickness="1" StrokeShape="Ellipse" BackgroundColor="White">
          <Label Text="&#xF00D;" FontFamily="FAS" FontSize="14" TextColor="{StaticResource TextPrimary}"
                 HorizontalOptions="Center" VerticalOptions="Center"/>
          <Border.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnCloseTapped"/>
          </Border.GestureRecognizers>
        </Border>
      </Grid>
    </Border>

    <!-- BODY -->
    <ScrollView Grid.Row="1">
      <VerticalStackLayout Spacing="12" Padding="16,0,16,24">

        <Border Style="{StaticResource Card}" Padding="0">
          <VerticalStackLayout Spacing="14" Padding="10,10,10,16">

            <!-- Grey top bar -->
            <Border BackgroundColor="{StaticResource GreyBar}" StrokeThickness="0"
                    StrokeShape="RoundRectangle 10" HeightRequest="24">
              <Label Text="X CLOSE SETTINGS" FontAttributes="Bold" FontSize="12"
                     TextColor="#333" HorizontalTextAlignment="Center" VerticalTextAlignment="Center"/>
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnCloseTapped"/>
              </Border.GestureRecognizers>
            </Border>

            <Label Text="Your algorithm configuration for the course:" 
                   FontSize="14" TextColor="{StaticResource TextSecondary}"
                   HorizontalTextAlignment="Center"/>
            <Label Text="{Binding ReviewerTitle}" FontAttributes="Bold" FontSize="16"
                   TextColor="{StaticResource TextPrimary}" HorizontalTextAlignment="Center"/>

            <!-- Mind Vault Default -->
            <Border x:Name="DefaultTile" Style="{StaticResource ModeTile}" BackgroundColor="{StaticResource Primary}">
              <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                <Border BackgroundColor="#F3F6FF" StrokeThickness="0" StrokeShape="Ellipse"
                        WidthRequest="54" HeightRequest="54">
                  <Label Text="&#xF0E7;" FontFamily="FAS" FontSize="20"
                         HorizontalOptions="Center" VerticalOptions="Center"
                         TextColor="{StaticResource PrimaryDark}"/>
                </Border>
                <Label x:Name="DefaultTileLabel" Grid.Column="1" Text="Mind Vault Default" FontSize="16"
                       FontAttributes="Bold" TextColor="White" VerticalOptions="Center"/>
              </Grid>
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnDefaultModeTapped"/>
              </Border.GestureRecognizers>
            </Border>
            <Label Text="Suited towards regular learning speed and review of new terms"
                   FontSize="12" TextColor="{StaticResource TextSecondary}" />

            <!-- Exam Cram Mode -->
            <Border x:Name="ExamTile" Style="{StaticResource ModeTile}" BackgroundColor="#E2E2E2">
              <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                <Label Text="&#xF5BD;" FontFamily="FAS" FontSize="24" TextColor="#666"
                       VerticalOptions="Center"/>
                <Label x:Name="ExamTileLabel" Grid.Column="1" Text="EXAM CRAM MODE" FontSize="16"
                       FontAttributes="Bold" TextColor="#555" VerticalOptions="Center"/>
              </Grid>
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnExamModeTapped"/>
              </Border.GestureRecognizers>
            </Border>
            <Label Text="Choose Exam Cram Mode for rapid learning with frequent term repetition"
                   FontSize="12" TextColor="{StaticResource TextSecondary}" />

            <BoxView HeightRequest="1" BackgroundColor="{StaticResource Divider}" Margin="0,6"/>

            <!-- Questions per round -->
            <Border BackgroundColor="{StaticResource Primary}" StrokeThickness="0"
                    StrokeShape="RoundRectangle 12" Padding="12,8">
              <Label Text="Questions per round" TextColor="White" FontAttributes="Bold" />
            </Border>

            <HorizontalStackLayout Spacing="10" HorizontalOptions="Center" Margin="0,4,0,0">
              <!-- 10 -->
              <Border x:Name="Round10Chip" Style="{StaticResource Chip}">
                <Label Text="10" TextColor="{StaticResource TextPrimary}" FontAttributes="Bold" />
                <Border.GestureRecognizers>
                  <TapGestureRecognizer Tapped="OnRoundSizeTapped" CommandParameter="10"/>
                </Border.GestureRecognizers>
              </Border>
              <!-- 20 -->
              <Border x:Name="Round20Chip" Style="{StaticResource Chip}">
                <Label Text="20" TextColor="{StaticResource TextPrimary}" FontAttributes="Bold" />
                <Border.GestureRecognizers>
                  <TapGestureRecognizer Tapped="OnRoundSizeTapped" CommandParameter="20"/>
                </Border.GestureRecognizers>
              </Border>
              <!-- 30 -->
              <Border x:Name="Round30Chip" Style="{StaticResource Chip}">
                <Label Text="30" TextColor="{StaticResource TextPrimary}" FontAttributes="Bold" />
                <Border.GestureRecognizers>
                  <TapGestureRecognizer Tapped="OnRoundSizeTapped" CommandParameter="30"/>
                </Border.GestureRecognizers>
              </Border>
              <!-- 40 -->
              <Border x:Name="Round40Chip" Style="{StaticResource Chip}">
                <Label Text="40" TextColor="{StaticResource TextPrimary}" FontAttributes="Bold" />
                <Border.GestureRecognizers>
                  <TapGestureRecognizer Tapped="OnRoundSizeTapped" CommandParameter="40"/>
                </Border.GestureRecognizers>
              </Border>
            </HorizontalStackLayout>

          </VerticalStackLayout>
        </Border>

      </VerticalStackLayout>
    </ScrollView>
    
    <!-- Reusable bottom sheet lives at top Grid level -->
    <controls:BottomSheetMenu x:Name="MainMenu" Grid.RowSpan="2" ZIndex="50"/>
  </Grid>
</ContentPage>
