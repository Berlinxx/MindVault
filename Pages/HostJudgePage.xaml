<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="mindvault.Pages.HostJudgePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Shell.NavBarIsVisible="False">

  <!-- THEME -->
  <ContentPage.Resources>
    <Color x:Key="Primary">#31B6D8</Color>
    <Color x:Key="PrimaryDark">#0B57C1</Color>
    <Color x:Key="Ink">#0D3848</Color>
    <Color x:Key="Surface">#FFFFFF</Color>
    <Color x:Key="TextPrimary">#14181B</Color>
    <Color x:Key="TextSecondary">#5B6673</Color>
    <Color x:Key="OkGreen">#2ECC71</Color>
    <Color x:Key="DangerRed">#E74C3C</Color>
  </ContentPage.Resources>

  <!-- BACKGROUND -->
  <ContentPage.Background>
    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
      <GradientStop Color="#3CC5F0" Offset="0" />
      <GradientStop Color="#0B57C1" Offset="1" />
    </LinearGradientBrush>
  </ContentPage.Background>

  <ScrollView>
    <VerticalStackLayout Spacing="16" Padding="16,20,16,28">

      <!-- FLASHCARD PANEL -->
      <Border BackgroundColor="{StaticResource Surface}" StrokeThickness="0" StrokeShape="RoundRectangle 22"
              WidthRequest="350" HeightRequest="420" Margin="0,6,0,0" HorizontalOptions="Center" Padding="14">
        <Grid RowDefinitions="Auto,*,Auto">
          <!-- header: deck title -->
          <Label Grid.Row="0" Text="Deck" FontAttributes="Bold" FontSize="16" TextColor="{StaticResource TextPrimary}"/>

          <!-- center: question/answer text; tap to flip -->
          <VerticalStackLayout Grid.Row="1" Spacing="8" HorizontalOptions="Center" VerticalOptions="Center">
            <Label Text="Tap card to flip and reveal answer" FontSize="11" TextColor="{StaticResource TextSecondary}" HorizontalTextAlignment="Center"/>
                        <Label Text="{Binding CurrentQuestion}" FontSize="20" TextColor="{StaticResource TextSecondary}" FontAttributes="Bold" HorizontalTextAlignment="Center"/>
            <Label Text="{Binding CurrentAnswer}" FontSize="16" TextColor="{StaticResource TextSecondary}" HorizontalTextAlignment="Center"/>
          </VerticalStackLayout>

          <!-- bottom controls: audio icon (placeholder) -->
          <Grid Grid.Row="2" ColumnDefinitions="*,Auto" Padding="0,2,0,0" Margin="8,0,8,8">
            <Grid Grid.Column="0"/>
            <Border Grid.Column="1" BackgroundColor="White" StrokeShape="Ellipse" WidthRequest="42" HeightRequest="42">
              <Label Text="&#xF028;" FontFamily="FAS" FontSize="18" TextColor="{StaticResource TextPrimary}"
                     HorizontalOptions="Center" VerticalOptions="Center"/>
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnSpeakTapped"/>
              </Border.GestureRecognizers>
            </Border>
          </Grid>
        </Grid>
        <Border.GestureRecognizers>
          <TapGestureRecognizer Tapped="OnFlip"/>
        </Border.GestureRecognizers>
      </Border>

      <!-- JUDGE BAR -->
      <Border BackgroundColor="{StaticResource Surface}" StrokeThickness="0" StrokeShape="RoundRectangle 22" Padding="10">
        <Grid ColumnDefinitions="Auto,*,Auto,Auto,Auto" ColumnSpacing="12" VerticalOptions="Center">
          <!-- avatar + name of buzzer -->
          <VerticalStackLayout Spacing="6" HorizontalOptions="Center" WidthRequest="78" IsVisible="{Binding HasBuzzWinner}">
            <Border WidthRequest="56" HeightRequest="56"
                    StrokeShape="Ellipse" StrokeThickness="0"
                    BackgroundColor="#E8DFFB">
              <Image Source="{Binding BuzzAvatar}" Aspect="AspectFill">
                <Image.Clip>
                  <EllipseGeometry Center="28,28" RadiusX="28" RadiusY="28"/>
                </Image.Clip>
              </Image>
            </Border>
            <Label Text="{Binding BuzzWinner}" FontSize="11"
                   TextColor="{StaticResource TextSecondary}"
                   HorizontalTextAlignment="Center"/>
          </VerticalStackLayout>

          <!-- instruction -->
          <Label Grid.Column="1" Text="RANG THE BELL FIRST!"
                 FontAttributes="Bold" FontSize="13"
                 TextColor="{StaticResource TextPrimary}"
                 VerticalOptions="Center"/>

          <!-- accept -->
          <Border Grid.Column="2" StrokeShape="Ellipse" WidthRequest="52" HeightRequest="52" BackgroundColor="{StaticResource OkGreen}">
            <Label Text="&#xF00C;" FontFamily="FAS" FontSize="18" TextColor="White" HorizontalOptions="Center" VerticalOptions="Center"/>
            <Border.GestureRecognizers>
              <TapGestureRecognizer Tapped="OnAccept"/>
            </Border.GestureRecognizers>
          </Border>

          <!-- reject -->
          <Border Grid.Column="3" StrokeShape="Ellipse" WidthRequest="52" HeightRequest="52" BackgroundColor="{StaticResource DangerRed}">
            <Label Text="&#xF00D;" FontFamily="FAS" FontSize="18" TextColor="White" HorizontalOptions="Center" VerticalOptions="Center"/>
            <Border.GestureRecognizers>
              <TapGestureRecognizer Tapped="OnReject"/>
            </Border.GestureRecognizers>
          </Border>

          <!-- next -->
          <Border Grid.Column="4" StrokeShape="Ellipse" WidthRequest="52" HeightRequest="52" BackgroundColor="White">
            <Label Text="&#xF105;" FontFamily="FAS" FontSize="18" TextColor="{StaticResource TextPrimary}" HorizontalOptions="Center" VerticalOptions="Center"/>
            <Border.GestureRecognizers>
              <TapGestureRecognizer Tapped="OnSkip"/>
            </Border.GestureRecognizers>
          </Border>
        </Grid>
      </Border>

    </VerticalStackLayout>
  </ScrollView>
</ContentPage>
